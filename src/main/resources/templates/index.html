<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>schdule</title>
    <!--<link rel = "stylesheet" href = "/css/index.css"/>-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css" />
</head>
<body style="padding :3rem;">
<p th:text="${#authentication.name}"/>
<p>님 환영합니다</p>
<div class = "menuContainer">
    <a href="/logout">로그아웃</a>
</div>

<div class = "mainContainer">
    <header>
        <div class ="headerLeft">
            <button class="prev">
                이전
            </button>
            <button class="today">Today</button>
            <button class="next">
                다음
            </button>
        </div>
        <div class ="headerCenter">
            <span class="now"></span>
        </div>

        <div class = "headerRight">
            <span class ="month">Month</span>
            <span class = "week">week</span>
            <span class = "day">day</span>
        </div>
    </header>
    <main>
        <div id="calendar" style="height: 900px;"></div>
    </main>
</div>
</body>
<script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>

<script>

    const Calendar = tui.Calendar;
    let now = document.querySelector('.now');

    const setCalendar = new Calendar('#calendar', {
        defaultView : 'month',
        useCreationPopup : true,
        useDetailPopup : true,
        // useFormPopup : true,

    });

    window.addEventListener('load', () => setNowDate());
    document.querySelector('.month').addEventListener('click', () => setCalendar.changeView('month'));
    document.querySelector('.week').addEventListener('click', () => setCalendar.changeView('week'));
    document.querySelector('.day').addEventListener('click', () => setCalendar.changeView('day'));

    document.querySelector('.prev').addEventListener('click', () => {
        setCalendar.prev();
        setNowDate();
    });

    document.querySelector('.next').addEventListener('click', () => {
        setCalendar.next();
        setNowDate();
    });

    document.querySelector('.today').addEventListener('click', () => {
        setCalendar.today();
        setNowDate();
    });

    function setNowDate() {
        let nowDate = new Date(setCalendar.getDate());
        const year = nowDate.getFullYear();
        const month = (1 + nowDate.getMonth());

        now.textContent=year+'.'+month;
    }

    const calendar = new Calendar(setCalendar);

    //     https://github.com/nhn/tui.calendar/blob/main/docs/ko/guide/getting-started.md#contents-delivery-network-cdn-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0*/
    //     https://nhn.github.io/tui.calendar/latest/tutorial-01-monthly-view-basic
    //     https://ui.toast.com/tui-calendar
    //     https://kimeck.tistory.com/17
    /*https://nowonbun.tistory.com/368
    https://jjunn93.com/entry/%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-FullCalendar-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0
    https://m.blog.naver.com/ioi___s_s/221494415471*/

    /*
   * session 관련
   * https://dev-gorany.tistory.com/139
   * */
</script>
</html>
